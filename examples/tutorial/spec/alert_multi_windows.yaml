name: example

slos:
  - name: availability
    objective:
      ratio: 0.99
      windowRef: window-4w
    indicator:
      prometheus:
        errorRatio: >-
          sum by (job) (rate(http_requests_total{job="example", code!~"2.."}[$window])) /
          sum by (job) (rate(http_requests_total{job="example"}[$window]))
        level:
          - job
    alerts:
      - name: burnrate-multiwindow-fast
        burnRate:
          consumedBudgetRatio: 0.02
          multiWindows:                # UPDATED: Added 5m short window
            shortWindowRef: window-5m  #
            longWindowRef: window-1h   #
        alerter:
          prometheus:
            name: SLOHighErrorRate
            labels:
              severity: page
            annotations:
              description: 2% error budget has been consumed within 1 hour
      - name: burnrate-multiwindow-slow
        burnRate:
          consumedBudgetRatio: 0.1
          multiWindows:                # UPDATED: Added 6h short window
            shortWindowRef: window-6h  #
            longWindowRef: window-3d   #
        alerter:
          prometheus:
            name: SLOHighErrorRate
            labels:
              severity: ticket
            annotations:
              description: 10% error budget has been consumed within 3 days
    windows:
      - name: window-5m
        rolling:
          duration: 5m
      - name: window-1h
        rolling:
          duration: 1h
      - name: window-6h  # UPDATED: Added a short window for slow burn
        rolling:         #
          duration: 6h   #
      - name: window-3d
        rolling:
          duration: 3d
      - name: window-4w
        rolling:
          duration: 4w
